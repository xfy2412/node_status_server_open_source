# æœåŠ¡å™¨çŠ¶æ€ç›‘æ§æœåŠ¡

ä¸€ä¸ªè½»é‡çº§çš„æœåŠ¡å™¨çŠ¶æ€å®æ—¶ç›‘æ§ç³»ç»Ÿï¼ŒåŸºäº Node.js å’Œ Expressï¼Œæä¾›ç®€æ´ç¾è§‚çš„Webç•Œé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š **å®æ—¶ç›‘æ§** - å®æ—¶æ˜¾ç¤ºCPUã€å†…å­˜ç­‰ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
- ğŸ“ˆ **å†å²æ•°æ®** - ä¿å­˜æœ€è¿‘10åˆ†é’Ÿçš„èµ„æºä½¿ç”¨å†å²ï¼ˆæ¯10ç§’è®°å½•ä¸€æ¬¡ï¼‰
- ğŸŒ **Webç•Œé¢** - å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒPCå’Œç§»åŠ¨è®¾å¤‡è®¿é—®
- ğŸ“Š **å›¾è¡¨å±•ç¤º** - ä½¿ç”¨Chart.jsç»˜åˆ¶åŠ¨æ€å®æ—¶å›¾è¡¨
- ğŸ–¥ï¸ **ç³»ç»Ÿä¿¡æ¯** - æ˜¾ç¤ºæœåŠ¡å™¨æ“ä½œç³»ç»Ÿã€CPUæ ¸å¿ƒæ•°ã€å†…å­˜å¤§å°ç­‰åŸºæœ¬ä¿¡æ¯
- ğŸ” **IPç»Ÿè®¡** - ç»Ÿè®¡å’Œæ˜¾ç¤ºè®¿é—®IPçš„è¯·æ±‚æ•°

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 12.0
- npm æˆ– yarn

### å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/xfy2412/node_status_server_open_source.git
cd node_status_server_open_source

# å®‰è£…ä¾èµ–
npm install
```

### è¿è¡Œ

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æˆ–ä½¿ç”¨ start å‘½ä»¤
npm start
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—®å³å¯ã€‚

## é¡¹ç›®ç»“æ„

```
node_status_server_open_source/
â”œâ”€â”€ server.js           # ExpressæœåŠ¡å™¨ä¸»æ–‡ä»¶
â”œâ”€â”€ package.json        # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ README.md          # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ config.json        # é…ç½®æ–‡ä»¶
â””â”€â”€ public/            # å‰ç«¯é™æ€æ–‡ä»¶ç›®å½•
    â””â”€â”€ index.html     # Webç•Œé¢
```

### é…ç½®è¯´æ˜

é…ç½®æ–‡ä»¶ä½äº [config.json](config.json)ã€‚ä»¥ä¸‹æ˜¯å½“å‰å¯ç”¨çš„ä¸»è¦é…ç½®é€‰é¡¹åŠå…¶é»˜è®¤å€¼ï¼š

- **`server.port`**: æœåŠ¡å™¨ç›‘å¬ç«¯å£ï¼Œé»˜è®¤ `3000`ã€‚
- **`server.enableRateLimit`**: æ˜¯å¦å¯ç”¨ç®€å•é¢‘ç‡é™åˆ¶ï¼ˆå¯¹éæœ¬åœ°IPï¼‰ï¼Œé»˜è®¤ `true`ã€‚
- **`server.minSecondsAfterLastRequest`**: ä¸¤æ¬¡è¯·æ±‚ä¹‹é—´å…è®¸çš„æœ€å°ç§’æ•°ï¼ˆå½“å¯ç”¨é¢‘ç‡é™åˆ¶æ—¶ï¼‰ï¼Œé»˜è®¤ `10`ï¼ˆç§’ï¼‰ã€‚
- **`getClientIp.getIpByXFF`**: æ˜¯å¦ä» `X-Forwarded-For` å¤´ä¸­è§£æå®¢æˆ·ç«¯ IPï¼Œé»˜è®¤ `true`ã€‚
- **`getClientIp.getIpByXFFFromStart`**: ä» `X-Forwarded-For` çš„å¼€å¤´å–ç¬¬ N ä¸ª IPï¼ˆ`true`ï¼‰è¿˜æ˜¯ä»æœ«å°¾å–ï¼ˆ`false`ï¼‰ï¼Œé»˜è®¤ `true`ã€‚
- **`getClientIp.getIpByXFFCount`**: å– `X-Forwarded-For` ä¸­çš„ç¬¬ N ä¸ª IPï¼ˆä¸ä¸Šé¡¹é…åˆï¼‰ï¼Œé»˜è®¤ `1`ã€‚
- **`systemStats.updateInterval`**: ç³»ç»ŸçŠ¶æ€ç¼“å­˜ä¸é‡‡é›†é—´éš”ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ `10000`ï¼ˆ10 ç§’ï¼‰ã€‚
- **`systemStats.ipRequestCountSaveMinutes`**: æ¸…ç©º IP è¯·æ±‚è®¡æ•°çš„é—´éš”ï¼ˆåˆ†é’Ÿï¼‰ï¼Œé»˜è®¤ `60`ï¼ˆåˆ†é’Ÿï¼‰ã€‚
- **`systemStats.MaxHistoryLength`**: ä¿ç•™çš„å†å²æ•°æ®ç‚¹æ•°é‡ï¼Œé»˜è®¤ `60`ï¼ˆå¦‚æœé‡‡é›†é—´éš”ä¸º10ç§’ï¼Œçº¦ä¸º10åˆ†é’Ÿçš„æ•°æ®ï¼‰ã€‚

ä¿®æ”¹ `config.json` åéœ€é‡å¯æœåŠ¡ä»¥ä½¿é…ç½®ç”Ÿæ•ˆã€‚


## APIæ¥å£

### è·å–ç³»ç»ŸçŠ¶æ€

**è¯·æ±‚ï¼š**
```
GET /api/status
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
    "success": true,
    "system": {
        "memory": {
            "total": "31.82 GB",
            "used": "28.20 GB",
            "free": "3.62 GB",
            "usage": "88.62%"
        },
        "cpu": {
            "count": 20,
            "model": "Intel(R) Core(TM) i5-14600KF",
            "usage": "12.05%"
        },
        "system": {
            "uptime": "9h 47m",
            "hostname": "xfy-Colorful",
            "platform": "win32",
            "arch": "x64"
        },
        "history": {
            "timestamp": [
                "2026-02-07T21:03:35.997Z",
                "2026-02-07T21:03:45.996Z"
            ],
            "memory": [
                88.84,
                88.62
            ],
            "cpu": [
                0,
                12.05
            ]
        }
    },
    "topIPs": [
        {
            "ip": "::1",
            "count": 1
        }
    ],
    "timestamp": "2026-02-07T21:03:47.055Z"
}
```

## é¡µé¢åŠŸèƒ½

- **ç³»ç»Ÿä¿¡æ¯å¡ç‰‡** - æ˜¾ç¤ºæ“ä½œç³»ç»Ÿã€CPUæ ¸å¿ƒæ•°ã€æ€»å†…å­˜ç­‰ä¿¡æ¯
- **å®æ—¶æ•°æ®å±•ç¤º** - ä»¥ç™¾åˆ†æ¯”å½¢å¼å®æ—¶æ˜¾ç¤ºCPUå’Œå†…å­˜ä½¿ç”¨ç‡
- **å®æ—¶å›¾è¡¨** - åŠ¨æ€æ›´æ–°çš„æŠ˜çº¿å›¾ï¼Œå±•ç¤ºæœ€è¿‘10åˆ†é’Ÿçš„æ•°æ®è¶‹åŠ¿
- **IPè®¿é—®ç»Ÿè®¡** - åˆ—è¡¨æ˜¾ç¤ºå„IPåœ°å€çš„è¯·æ±‚æ¬¡æ•°

## æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶** - Express.js
- **å‰ç«¯å›¾è¡¨åº“** - Chart.js
- **ç³»ç»Ÿä¿¡æ¯è·å–** - Node.js os æ¨¡å—

## ä¾èµ–

- [express](https://expressjs.com/) - Webåº”ç”¨æ¡†æ¶

## è‡ªå®šä¹‰é…ç½®

### ç¯å¢ƒå˜é‡è¦†ç›–

ä½ å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡è¦†ç›–é…ç½®ä¸­çš„ç«¯å£ï¼ˆå¸¸è§äºå®¹å™¨/äº‘éƒ¨ç½²ï¼‰ï¼š

```bash
# ä½¿ç”¨ç¯å¢ƒå˜é‡è¦†ç›–ç«¯å£
PORT=8080 npm start
```

å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é€šè¿‡ `process manager`ï¼ˆå¦‚ `pm2`ï¼‰æˆ– `systemd` å¯åŠ¨å¹¶ç®¡ç†è¿›ç¨‹ã€‚

### ç¤ºä¾‹é…ç½®ç‰‡æ®µï¼ˆconfig.jsonï¼‰

```json
{
    "server": {
        "port": 3000,
        "enableRateLimit": true,
        "minSecondsAfterLastRequest": 10
    },
    "getClientIp": {
        "getIpByXFF": true,
        "getIpByXFFFromStart": true,
        "getIpByXFFCount": 1
    },
    "systemStats": {
        "updateInterval": 10000,
        "ipRequestCountSaveMinutes": 60,
        "MaxHistoryLength": 60
    }
}
```

ä¿®æ”¹ `config.json` åéœ€é‡å¯æœåŠ¡ä»¥ä½¿é…ç½®ç”Ÿæ•ˆã€‚

## ä½¿ç”¨åœºæ™¯

- ğŸ–¥ï¸ VPS/äº‘æœåŠ¡å™¨ç›‘æ§
- ğŸ“Š å­¦ä¹  Node.js å’Œ Express çš„ç¤ºä¾‹é¡¹ç›®
- ğŸ”§ å†…ç½‘æœåŠ¡å™¨çŠ¶æ€å±•ç¤ºæ¿
- ğŸ“ˆ ç®€å•çš„ç³»ç»Ÿèµ„æºç›‘æ§å·¥å…·

## æ³¨æ„äº‹é¡¹

- å†å²æ•°æ®é»˜è®¤ä¿ç•™æœ€è¿‘10åˆ†é’Ÿçš„æ•°æ®
- å¼€å¯æœåŠ¡å™¨åæ¯å°æ—¶æ¸…ç©ºIPç»Ÿè®¡
- å»ºè®®åœ¨å±€åŸŸç½‘æˆ–å—ä¿¡ç½‘ç»œå†…ä½¿ç”¨

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

## ä½œè€…

xfy2412

---

**æ›´æ–°æ—¥æœŸ**: 2026å¹´2æœˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æå‡º Issueï¼
